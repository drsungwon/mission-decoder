#  Mission Python - Log Decryption Utility π”

![alt text](https://img.shields.io/badge/python-3.9+-blue.svg)
![alt text](https://img.shields.io/badge/managed%20with-Poetry-blueviolet.svg)
![alt text](https://img.shields.io/pypi/v/cryptography.svg)
![alt text](https://img.shields.io/badge/license-MIT-blue.svg)

**`mission-python` ν”„λ μ„μ›ν¬μ—μ„ μƒμ„±λ μ•”νΈν™”λ λ΅κ·Έ λ° μ‹μ¤ν… μ„λ…μ„ λ³µνΈν™”ν•λ” κ³µμ‹ μ»¤λ§¨λ“ λΌμΈ μ ν‹Έλ¦¬ν‹°μ…λ‹λ‹¤.** <br>
*The official command-line utility for decrypting logs and system signatures generated by the `mission-python` framework.*

---

## π€ ν”„λ΅μ νΈ κ°μ” (Overview)

`mission-python` ν”„λ΅μ νΈλ” ν•™μƒλ“¤μ κ³Όμ  μν–‰ κ³Όμ •μ„ μ•μ „ν•κ² κΈ°λ΅ν•κΈ° μ„ν•΄ λ¨λ“  λ΅κ·Έ(`log.encrypted`)μ™€ μ‹μ¤ν… μ •λ³΄(`signature.encrypted`)λ¥Ό **ν•μ΄λΈλ¦¬λ“ μ•”νΈν™”(RSA + AES)** λ°©μ‹μΌλ΅ μ €μ¥ν•©λ‹λ‹¤. μ΄ λ°μ΄ν„°λ” ν‰κ°€μ λλ” κ΄€λ¦¬μμ **κ°μΈν‚¤(Private Key)** μ—†μ΄λ” μ λ€λ΅ μ—΄μ–΄λ³Ό μ μ—†μµλ‹λ‹¤.

λ³Έ `mission-decoder` μ ν‹Έλ¦¬ν‹°λ” μ΄ κ°μΈν‚¤λ¥Ό μ‚¬μ©ν•μ—¬ μ•”νΈν™”λ λ°”μ΄λ„λ¦¬ νμΌμ„ μ‚¬λμ΄ μ½μ„ μ μλ” ν‰λ¬Έ(Plaintext) ν…μ¤νΈ νμΌλ΅ λ³€ν™ν•λ” μ—­ν• μ„ μν–‰ν•©λ‹λ‹¤.

## β¨ μ£Όμ” κΈ°λ¥ (Key Features)

- **κ°•λ ¥ν• λ³΄μ•**: μ—…κ³„ ν‘μ¤€μΈ RSA-2048 λ° AES-256 μ•”νΈν™” μ²΄κ³„λ¥Ό μ™„λ²½ν•κ² μ§€μ›ν•©λ‹λ‹¤.
- **μ²­ν¬ λ‹¨μ„ μ²λ¦¬**: νμΌ μ „μ²΄κ°€ μ•„λ‹, μ—¬λ¬ κ°μ μ•”νΈν™”λ λ°μ΄ν„° μ΅°κ°(Chunk)μΌλ΅ κµ¬μ„±λ λ΅κ·Έ νμΌμ„ μμ°¨μ μΌλ΅ μ•μ „ν•κ² λ³µνΈν™”ν•©λ‹λ‹¤.
- **λ…ν™•ν• CLI μΈν„°νμ΄μ¤**: `cargo`μ™€ μ μ‚¬ν• μ§κ΄€μ μΈ μƒνƒ λ©”μ‹μ§€λ¥Ό ν†µν•΄ λ³µνΈν™” κ³Όμ •μ κ° λ‹¨κ³„λ¥Ό λ…ν™•ν•κ² λ³΄μ—¬μ¤λ‹λ‹¤.
- **λ…λ¦½ μ‹¤ν–‰ κ°€λ¥**: `mission-python` ν”„λ΅μ νΈμ™€λ” λ³„κ°μ λ…λ¦½μ μΈ λ„κµ¬λ΅, ν•„μ”ν• ν™κ²½μ—μ„ κ°„νΈν•κ² μ‚¬μ©ν•  μ μμµλ‹λ‹¤.

## π› οΈ μ‹μ‘ν•κΈ° (Getting Started)

### μ‚¬μ „ μ”κµ¬μ‚¬ν•­ (Prerequisites)

- [Python](https://www.python.org/downloads/) (3.9 μ΄μƒ κ¶μ¥)
- [Poetry](https://python-poetry.org/docs/#installation) (ν¨ν‚¤μ§€ λ° μμ΅΄μ„± κ΄€λ¦¬ λ„κµ¬)
- Git

### μ„¤μΉ λ° μ„¤μ • (Installation)

1.  **ν”„λ΅μ νΈ λ³µμ  (Clone)**

    ```bash
    git clone [your-repository-url]
    cd mission-decoder
    ```

2.  **μμ΅΄μ„± μ„¤μΉ (Install Dependencies)**

    `Poentry`λ¥Ό μ‚¬μ©ν•μ—¬ ν•„μ”ν• λΌμ΄λΈλ¬λ¦¬(`cryptography`)λ¥Ό μ„¤μΉν•©λ‹λ‹¤. μ΄ κ³Όμ •μ—μ„ κ°€μƒ ν™κ²½μ΄ μλ™μΌλ΅ μƒμ„±λ©λ‹λ‹¤.

    ```bash
    poetry install
    ```

3.  **π”‘ κ°μΈν‚¤ μ¤€λΉ„ (Prepare Your Private Key)**

    λ³µνΈν™”λ¥Ό μ„ν•΄ μ κ³µλ **RSA κ°μΈν‚¤ νμΌ** (μ: `private_key.pem`)μ„ ν”„λ΅μ νΈ λ‚΄ μ•μ „ν• μ„μΉμ— μ¤€λΉ„ν•΄μ•Ό ν•©λ‹λ‹¤. `keys` λ””λ ‰ν† λ¦¬λ¥Ό λ§λ“¤μ–΄ κ΄€λ¦¬ν•λ” κ²ƒμ„ κ¶μ¥ν•©λ‹λ‹¤.

    ```
    mission-decoder/
    β”β”€β”€ keys/
    β”‚   β””β”€β”€ private_key.pem  <-- μ—¬κΈ°μ— κ°μΈν‚¤λ¥Ό μ„μΉμ‹ν‚¤μ„Έμ”.
    β””β”€β”€ src/
        β””β”€β”€ ...
    ```

    > β οΈ **λ³΄μ• κ²½κ³ **: κ°μΈν‚¤ νμΌμ€ μ λ€ μ™Έλ¶€μ— λ…Έμ¶λκ±°λ‚ Git μ €μ¥μ†μ— μ»¤λ°‹ν•΄μ„λ” μ• λ©λ‹λ‹¤. ν”„λ΅μ νΈμ `.gitignore` νμΌμ— `keys/` λ””λ ‰ν† λ¦¬λ¥Ό μ¶”κ°€ν•μ—¬ μ‹¤μλ΅ μ»¤λ°‹λλ” κ²ƒμ„ λ°©μ§€ν•μ„Έμ”.

## π’» μ‚¬μ© λ°©λ²• (Usage)

λ³µνΈν™”λ” ν„°λ―Έλ„μ—μ„ λ‹¤μ λ…λ Ήμ–΄λ¥Ό ν†µν•΄ μ‹¤ν–‰ν•©λ‹λ‹¤. μ΄ 3κ°μ μΈμ(μ…λ ¥ νμΌ, κ°μΈν‚¤, μ¶λ ¥ νμΌ)κ°€ ν•„μ”ν•©λ‹λ‹¤.

### λ…λ Ήμ–΄ ν•μ‹

```bash
poetry run python -m mission_decoder.main [INPUT_FILE] [PRIVATE_KEY] [OUTPUT_FILE]
```

-   `INPUT_FILE`: λ³µνΈν™”ν•  μ•”νΈν™”λ νμΌ κ²½λ΅ (μ: `log.encrypted`).
-   `PRIVATE_KEY`: λ³µνΈν™”μ— μ‚¬μ©ν•  κ°μΈν‚¤ νμΌ κ²½λ΅ (μ: `keys/private_key.pem`).
-   `OUTPUT_FILE`: λ³µνΈν™”λ λ‚΄μ©μ΄ μ €μ¥λ  νμΌ κ²½λ΅ (μ: `decrypted_log.txt`).

### μ‹¤ν–‰ μμ‹

```bash
poetry run python -m mission_decoder.main \
    ../mission-python/src/mission_python/log/log.encrypted \
    ./keys/private_key.pem \
    ./output/decrypted_log.txt
```

### μ„±κ³µ μ‹ μ¶λ ¥ μμ‹

```
[  INFO   ] μ•”νΈν™”λ λ΅κ·Έ λ³µνΈν™” ν”„λ΅μ„Έμ¤λ¥Ό μ‹μ‘ν•©λ‹λ‹¤...
             - μ…λ ¥ νμΌ: /path/to/mission-python/src/mission_python/log/log.encrypted
             - κ°μΈν‚¤:    /path/to/mission-decoder/keys/private_key.pem
             - μ¶λ ¥ νμΌ: /path/to/mission-decoder/output/decrypted_log.txt

[ STEP 1  ] κ°μΈν‚¤ νμΌμ„ λ΅λ”©ν•©λ‹λ‹¤...
[   OK    ] κ°μΈν‚¤ λ΅λ”© μ„±κ³µ.
[ STEP 2  ] 'log.encrypted' νμΌ μ²λ¦¬λ¥Ό μ‹μ‘ν•©λ‹λ‹¤...
[   ...   ] μ²­ν¬ #1 λ³µνΈν™” μ¤‘...
[   ...   ] μ²­ν¬ #2 λ³µνΈν™” μ¤‘...
...
[   ...   ] μ²­ν¬ #N λ³µνΈν™” μ¤‘...
[ STEP 3  ] './output/decrypted_log.txt' νμΌμ— κ²°κ³Όλ¥Ό μ €μ¥ν•©λ‹λ‹¤...
[ SUCCESS ] μ΄ Nκ°μ μ²­ν¬λ¥Ό μ„±κ³µμ μΌλ΅ λ³µνΈν™”ν–μµλ‹λ‹¤.
```

## β™οΈ λ™μ‘ μ›λ¦¬: μ•”νΈν™”λ νμΌμ κµ¬μ΅°

`log.encrypted`μ™€ κ°™μ€ νμΌμ€ λ‹¨μν• μ•”νΈλ¬Έμ΄ μ•„λ‹λΌ, μ•„λ κµ¬μ΅°λ¥Ό κ°€μ§„ μ—¬λ¬ κ°μ **μ²­ν¬(Chunk)**κ°€ μ—°μ†μ μΌλ΅ μ΄μ–΄μ§„ λ°”μ΄λ„λ¦¬ νμΌμ…λ‹λ‹¤.

```
[ Chunk 1 ] [ Chunk 2 ] [ Chunk 3 ] ...
```

κ°κ°μ μ²­ν¬λ” λ‹¤μκ³Ό κ°™μ€ μ„Έ λ¶€λ¶„μΌλ΅ κµ¬μ„±λ©λ‹λ‹¤.

| λ¶€λ¶„ (Block)               | ν¬κΈ° (Bytes)    | μ„¤λ…                                                               |
| -------------------------- | --------------- | ------------------------------------------------------------------ |
| **RSA Encrypted Session Key** | `256`           | RSA κ³µκ°ν‚¤λ΅ μ•”νΈν™”λ `AES ν‚¤ + IV`. κ°μΈν‚¤λ΅λ§ ν•΄λ… κ°€λ¥.           |
| **AES Data Length**        | `4`             | λ’¤λ”°λΌμ¤λ” μ•”νΈν™”λ λ°μ΄ν„°μ μ •ν™•ν• κΈΈμ΄. (λΉ…μ—”λ””μ• 4λ°”μ΄νΈ μ •μ)  |
| **AES Encrypted Data**     | *κ°€λ³€ (Variable)* | AES-256μΌλ΅ μ•”νΈν™”λ μ‹¤μ  λ°μ΄ν„°. (λ΅κ·Έ, μ‹μ¤ν… μ •λ³΄ λ“±)            |

λ³µνΈν™” μ ν‹Έλ¦¬ν‹°λ” νμΌμ„ μμ„λ€λ΅ μ½μΌλ©° μ΄ μ²­ν¬ κµ¬μ΅°λ¥Ό ν•λ‚μ”© νμ‹±ν•κ³ , κ° μ²­ν¬λ§λ‹¤ λ‹¤μμ κ³Όμ •μ„ λ°λ³µν•μ—¬ μ›λ³Έ λ°μ΄ν„°λ¥Ό λ³µμ›ν•©λ‹λ‹¤.

1.  **μ„Έμ…ν‚¤ λ³µνΈν™”**: `RSA Block`μ„ κ°μΈν‚¤λ΅ λ³µνΈν™”ν•μ—¬ μ„μ‹ `AES ν‚¤`μ™€ `IV`λ¥Ό μ–»μµλ‹λ‹¤.
2.  **λ°μ΄ν„° λ³µνΈν™”**: μ„μ—μ„ μ–»μ€ `AES ν‚¤`μ™€ `IV`λ¥Ό μ‚¬μ©ν•μ—¬ `AES Block`μ„ λ³µνΈν™”ν•©λ‹λ‹¤.
3.  **ν¨λ”© μ κ±°**: λ³µνΈν™”λ λ°μ΄ν„°μ—μ„ PKCS7 ν¨λ”©μ„ μ κ±°ν•μ—¬ μμν• μ›λ³Έ λ°μ΄ν„°λ¥Ό μ–»μµλ‹λ‹¤.
4.  **λ°μ΄ν„° λ³‘ν•©**: λ³µμ›λ λ°μ΄ν„°λ¥Ό μµμΆ… κ²°κ³Ό λ²„νΌμ— μ¶”κ°€ν•©λ‹λ‹¤.
5.  νμΌμ λμ— λ„λ‹¬ν•  λ•κΉμ§€ μ„ κ³Όμ •μ„ λ°λ³µν•©λ‹λ‹¤.

## π“„ λΌμ΄μ„ μ¤ (License)

μ΄ ν”„λ΅μ νΈλ” [MIT](LICENSE) λΌμ΄μ„ μ¤λ¥Ό λ”°λ¦…λ‹λ‹¤.